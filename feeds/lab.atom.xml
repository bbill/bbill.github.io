<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>SDN Hands ON! - lab</title><link href="https://bbill.github.io/" rel="alternate"></link><link href="https://bbill.github.io/feeds/lab.atom.xml" rel="self"></link><id>https://bbill.github.io/</id><updated>2018-01-24T00:00:00+08:00</updated><entry><title>试用 RYU NAT</title><link href="https://bbill.github.io/lab/try_ryu_nat.html" rel="alternate"></link><published>2018-01-24T00:00:00+08:00</published><author><name>bill</name></author><id>tag:bbill.github.io,2018-01-24:/lab/try_ryu_nat.html/</id><summary type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#sec-1"&gt;1. 安装RYU&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sec-2"&gt;2. 安装&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sec-3"&gt;3. 运行&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sec-4"&gt;4. 验证&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-sec-1" class="outline-2"&gt;
&lt;h2 id="sec-1"&gt;&lt;span class="section-number-2"&gt;1&lt;/span&gt; 安装RYU&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-1"&gt;
&lt;p&gt;
略，不清楚可以参考 &lt;a href="https://bbill.github.io/lab/ryu_lab1.org"&gt;这里&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-sec-2" class="outline-2"&gt;
&lt;h2 id="sec-2"&gt;&lt;span class="section-number-2"&gt;2&lt;/span&gt; 安装&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-2"&gt;
&lt;pre class="example"&gt;
cd 
git clone https://github.com/bbill/nat.git ryu/ryu/app/nat
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-sec-3" class="outline-2"&gt;
&lt;h2 id="sec-3"&gt;&lt;span class="section-number-2"&gt;3&lt;/span&gt; 运行&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-3"&gt;
&lt;pre class="example"&gt;
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-sec-4" class="outline-2"&gt;
&lt;h2 id="sec-4"&gt;&lt;span class="section-number-2"&gt;4&lt;/span&gt; 验证&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-4"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;如果没有实体SDN交换机，请安装 mininet
&lt;pre class="example"&gt;
cd 
git clone https://github.com/mininet/mininet.git
./mininet/util/install …&lt;/pre&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;/div&gt;</summary><category term="ryu"></category><category term="nat"></category><category term="dhcp"></category><category term="agent"></category><category term="sdn"></category><category term="OpenFlow"></category></entry><entry><title>libvirtd 导致的dnsmasq 冲突问题</title><link href="https://bbill.github.io/lab/libvirt_dnsmasq_conflict.html" rel="alternate"></link><published>2018-01-20T00:00:00+08:00</published><author><name>bill</name></author><id>tag:bbill.github.io,2018-01-20:/lab/libvirt_dnsmasq_conflict.html/</id><summary type="html">&lt;p&gt;
在一台机器上用dnsmasq 做dhcp server，报错
&lt;/p&gt;

&lt;pre class="example"&gt;
failed to bind dhcp server socket: Address already in use.
&lt;/pre&gt;
&lt;p&gt;
查看后发现系统内已经由libvirtd 启动了一个dnsmasq，对virtbr0提供服务。&lt;a href="https://wiki.libvirt.org/page/Libvirtd_and_dnsmasq"&gt;这里&lt;/a&gt;提供了解决方案。
关键是取消  bind-interfaces这一行的注释。并且指定需要监听的interface或者IP。
&lt;/p&gt;

&lt;pre class="example"&gt;
bind-interfaces
interface=eth0
listen-address=192.168.0.1
&lt;/pre&gt;
</summary><category term="libvirtd"></category><category term="dasmasq"></category><category term="conflict"></category></entry><entry><title>Pica8 OVS 模式常用命令</title><link href="https://bbill.github.io/lab/pica8_OVS_Command_Reference.html" rel="alternate"></link><published>2018-01-05T00:00:00+08:00</published><author><name>bill</name></author><id>tag:bbill.github.io,2018-01-05:/lab/pica8_OVS_Command_Reference.html/</id><summary type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#sec-1"&gt;1. 确认端口状态&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id="outline-container-sec-1" class="outline-2"&gt;
&lt;h2 id="sec-1"&gt;&lt;span class="section-number-2"&gt;1&lt;/span&gt; 确认端口状态&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-1"&gt;
&lt;ol class="org-ol"&gt;
&lt;li&gt;端口计数器
&lt;pre class="example"&gt;
admin@PicOS-OVS$ovs-ofctl dump-ports  br0
OFPST_PORT reply (OF1.3) (xid=0x2): 49 ports
  port  1: rx pkts=0, bytes=979551, drop=0, errs=518513, frame=0, over=0, crc=0
           tx pkts=457981, bytes=34858800, drop=0, errs=0, coll=0
           duration …&lt;/pre&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;/div&gt;</summary><category term="pica"></category><category term="white box"></category><category term="openflow"></category><category term="sdn"></category></entry><entry><title>Pica8 白盒交换机快速上手</title><link href="https://bbill.github.io/lab/pica8_quick_start.html" rel="alternate"></link><published>2018-01-05T00:00:00+08:00</published><author><name>bill</name></author><id>tag:bbill.github.io,2018-01-05:/lab/pica8_quick_start.html/</id><summary type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#sec-1"&gt;1. 初始设置和访问&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#sec-1-1"&gt;1.1. 登陆交换机&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sec-1-2"&gt;1.2. 设定默认启动模式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sec-1-3"&gt;1.3. 设置 Openflow SDN网络&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#sec-2"&gt;2. TAP简单上手&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sec-3"&gt;3. 软件版本升级&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#sec-4"&gt;4. 手册及参考&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div id="outline-container-sec-1" class="outline-2"&gt;
&lt;h2 id="sec-1"&gt;&lt;span class="section-number-2"&gt;1&lt;/span&gt; 初始设置和访问&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-1"&gt;
&lt;/div&gt;&lt;div id="outline-container-sec-1-1" class="outline-3"&gt;
&lt;h3 id="sec-1-1"&gt;&lt;span class="section-number-3"&gt;1.1&lt;/span&gt; 登陆交换机&lt;/h3&gt;
&lt;div class="outline-text-3" id="text-1-1"&gt;
&lt;p&gt;
交换机开箱后的初始登录，可以通过 串口(RJ45)来进行。 找到交换机 的console
口(一般会标有Con)。通过windows 主机上的超级终端工具，或者putty,
securecrt 等 终端工具，配置串口参数为 115200,
8/N/1,硬件流控设为没有（关闭）.后即可 …&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><category term="pica"></category><category term="white box"></category><category term="openflow"></category><category term="sdn"></category></entry><entry><title>在P-3290 系统上安装 PicOS 操作系统</title><link href="https://bbill.github.io/lab/upgrade_P-3290.html" rel="alternate"></link><published>2017-10-16T00:00:00+08:00</published><author><name>bill</name></author><id>tag:bbill.github.io,2017-10-16:/lab/upgrade_P-3290.html/</id><summary type="html">&lt;div id="table-of-contents"&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id="text-table-of-contents"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#sec-1"&gt;1. 重启交换机&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="outline-container-sec-1" class="outline-2"&gt;
&lt;h2 id="sec-1"&gt;&lt;span class="section-number-2"&gt;1&lt;/span&gt; 重启交换机&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-1"&gt;
&lt;p&gt;
以3290 为例，不同交换机进入 底层 shell的方法不同
&lt;/p&gt;

&lt;p&gt;
使用串口连接交换机，重启后在系统出现
&lt;/p&gt;

&lt;p&gt;
press any key to stop autoboot 时，按回车
&lt;/p&gt;

&lt;p&gt;
会进入一个shell
&lt;/p&gt;

&lt;p&gt;
执行run flash&lt;sub&gt;bootcmd&lt;/sub&gt;
&lt;/p&gt;

&lt;p&gt;
等待运行结束，出现菜单选项时，敲两次 &lt;b&gt;ctrl +d&lt;/b&gt;, 进入shell
&lt;/p&gt;


&lt;div class="org-src-container"&gt;

&lt;pre class="src src-bash"&gt;cd /cf_card
rm –rf [a-y]* 
tftp -gr picos-2.9.2.5-P3290-30f7332.tar.gz -l z.tgz 192.168 …&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</summary><category term="P-3290"></category><category term="upgrade"></category><category term="pica8"></category><category term="sdn"></category><category term="openflow"></category><category term="baremetal"></category></entry><entry><title>升级Pica8操作系统</title><link href="https://bbill.github.io/lab/upgrade_picos.html" rel="alternate"></link><published>2017-10-16T00:00:00+08:00</published><author><name>bill</name></author><id>tag:bbill.github.io,2017-10-16:/lab/upgrade_picos.html/</id><summary type="html">&lt;p&gt;
更新前需要做如下检查，确保能使用upgrade命令升级：
&lt;/p&gt;


&lt;ol class="org-ol"&gt;
&lt;li&gt;确定备份分区状态（它必须是ok或者up-to-date）

&lt;blockquote&gt;
&lt;p&gt;
admin@PicOS-OVS$cat /etc/picos/fs&lt;sub&gt;status&lt;/sub&gt;
&lt;/p&gt;

&lt;p&gt;
primary: ok
&lt;/p&gt;

&lt;p&gt;
secondary: up-to-date
&lt;/p&gt;

&lt;p&gt;
admin@PicOS-OVS$
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;

&lt;li&gt;上传更新image文件到交换机的/cftmp 目录

&lt;p&gt;
假设您用来下载的主机系统为linux，IP地址为 10.10.10.16，下载的文
件名为 picos-2.8.0-P5401-45ec985.tar.gz 在确保交换机可以ping 通
10.10.50.16后，可以在 &lt;b&gt;交换机&lt;/b&gt; 上执行
&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;
admin@PicOS-OVS$cd &lt;i&gt;cftmp&lt;/i&gt;
&lt;/p&gt;

&lt;p&gt;
admin@PicOS-OVS$sudo scp …&lt;/p&gt;&lt;/blockquote&gt;&lt;/li&gt;&lt;/ol&gt;</summary><category term="pica8"></category><category term="maitainence"></category><category term="openflow"></category><category term="hardware"></category><category term="upgrade"></category></entry></feed>